{"data":{"Article":{"html":"<p>{% callout important %}\nThis instructions are for those who use our older instace that did not use Docker. If you use our new Docker based instance, check the <a href=\"%7B%25%20link%20_kb/open-source/admin-guide/how-to-upgrade.md%20%25%7D\">updated guide</a>.\n{% endcallout %}</p>\n<p>It's recommended to upgrade your Redash instance once there are new releases, to benefit from new features and bug fixes. The upgrade process is relatively simple, and assuming you used one of the base images we provide, you can simply run the upgrade script. <strong>If you have a custom deployment, you can use the upgrade script as reference to create your own process</strong>.</p>\n<p>{% callout danger %}\nBitnami instances are not compatible with this script.\n{% endcallout %}</p>\n<h2>How to upgrade (v1.0.0 and newer)</h2>\n<p>Starting from v1.0.0, the upgrade script is part of the codebase, and running the script is as simple as:</p>\n<pre><code class=\"language-bash\">cd /opt/redash/current\nsudo bin/upgrade\n</code></pre>\n<p>{% callout info %}\nIf you're upgrading to a beta version, you need to specify the channel: <code>sudo bin/upgrade --channel beta</code>.\n{% endcallout %}</p>\n<h3>Docker</h3>\n<p>If you're using Docker to run Redash, <strong>don't use the upgrade script</strong>. Instead you need to:</p>\n<ol>\n<li>Update the Docker image you're using.</li>\n<li>Apply migrations (if needed). To apply migrations you need to invoke the image with <code>manage db upgrade</code> as the command. The way to do this depends on the way you deploy Redash.</li>\n</ol>\n<h2>How to upgrade (pre v1.0.0 versions)</h2>\n<p>In v1.0.0 we added the script to the repository, but if you have an earlier version, you will need to download the script first (<strong>note that you need to download it to your Redash server</strong>):</p>\n<pre><code class=\"language-bash\">wget https://raw.githubusercontent.com/getredash/redash/master/bin/upgrade\nchmod +x upgrade\n</code></pre>\n<p>Run it:</p>\n<pre><code class=\"language-bash\">sudo ./upgrade\n</code></pre>\n<p>Before doing the upgrade, please make sure to do the following changes to your <code>/opt/redash/.env</code> file:</p>\n<ol>\n<li>If you have local PostreSQL database, you will need to update the URL from <code>postgresql://redash</code> to <code>postgresql:///redash</code>.</li>\n<li>Remove the <code>REDASH_STATIC_ASSETS_PATH</code> definition.</li>\n</ol>\n<p>{% callout %}\nYou can upgrade to v1.0.0 and later only from v0.12.0, so if you have an older version, run: <code>sudo upgrade --channel legacy</code> first and then <code>sudo upgrade</code>.\n{% endcallout %}</p>\n<h2>Troubleshooting</h2>\n<h3>Upgrade failing with \"sudo: /etc/init.d/redash_supervisord: command not found\"</h3>\n<p>You need to manually run the restart command:</p>\n<pre><code>sudo service supervisor restart\n</code></pre>\n<p>In v2.0.0 we fixed the upgrade script to use the correct command.</p>\n<h3>Some (or all) data sources disappeared after upgrading</h3>\n<p>The upgrade process updates the code, applies migrations and upgrade Python requirements. But it does not upgrade Python requirements for the data sources (described in <code>/opt/redash/current/requirements_all_ds.txt</code>).</p>\n<p>In some cases, old packages will prevent the data source from loading. Make sure to manually update the requirements relevant to the data sources you need.</p>\n<h4>I don't see BigQuery in the data sources list after upgrading to v2.0.0</h4>\n<p>You need to upgrade the following Python packages:</p>\n<pre><code>google-api-python-client==1.5.1\noauth2client==3.0.0\n</code></pre>\n<p>(<code>sudo pip install -U google-api-python-client==1.5.1 oauth2client==3.0.0</code>)</p>\n<h4>I don't see Athena in the data sources list after upgrading to v2.0.0</h4>\n<p>Make sure to install PyAthena:</p>\n<p><code>sudo pip install PyAthena>=1.0.0</code></p>\n<h3>Getting \"AttributeError: 'module' object has no attribute 'SSL<em>ST</em>INIT'\" error during upgrade</h3>\n<p>Make sure to upgrade the PyOpenSSL package (see the version specified in <code>requirements_all_ds.txt</code>).</p>","frontmatter":{"permalink":null,"title":"How to Upgrade (Legacy Images)","description":null,"keywords":null,"parent_category":"open-source","category":"admin-guide","toc":null,"layout":null,"hide_topics":null},"parent":{"__typename":"File","relativePath":"kb/open-source/admin-guide/how-to-upgrade-legacy.md"}},"Parent":{"frontmatter":{"title":"Admin Guide"}},"Section":{"name":"Open Source & Self Hosted"}},"pageContext":{"category":"admin-guide","parent_category":"open-source","slug":"how-to-upgrade-legacy"}}