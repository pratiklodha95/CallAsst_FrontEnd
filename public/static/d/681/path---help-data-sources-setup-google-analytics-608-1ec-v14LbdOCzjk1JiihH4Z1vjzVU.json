{"data":{"Article":{"html":"<h2>Setup The Datasource</h2>\n<h3>Create a Service Account</h3>\n<ol>\n<li>Open the <a href=\"https://console.cloud.google.com/iam-admin/serviceaccounts\">Service accounts page</a>. If prompted, select a project.</li>\n<li>Click <strong>Create service account</strong>.</li>\n<li>In the Create service account window, type a name for the service account, and select Furnish a new private key. When prompted, select <strong>JSON key file type</strong>. Then click <strong>Create</strong>.</li>\n</ol>\n<p>Your new public/private key pair is generated and downloaded to your machine; it serves as the only copy of this key. You are responsible for storing it securely.</p>\n<h3>Enable the API</h3>\n<p>You will need to enable \"Analytics API\" for your Google Cloud project.</p>\n<h3>Add service account to the Google Analytics account</h3>\n<p>The newly created service account will have an email address that looks similar to:\nquickstart@PROJECT-ID.iam.gserviceaccount.com\nUse this email address to <a href=\"https://support.google.com/analytics/answer/1009702\">add a user</a> to the Google analytics view you want to access via the API. For Redash only <a href=\"https://support.google.com/analytics/answer/2884495\">Read &#x26; Analyze</a> permissions are needed.</p>\n<h3>Create Datasource in Redash</h3>\n<p>Create datasource of \"Google Analytics\" type with the JSON file generated in the \"Create a Service Account\" step.</p>\n<h2>Example Queries</h2>\n<pre><code>{\n    \"ids\": \"ga:97038718\",\n    \"start_date\": \"30daysAgo\",\n    \"end_date\": \"yesterday\",\n    \"metrics\": \"ga:newUsers\",\n    \"dimensions\": \"ga:country\",\n    \"max_results\": 10,\n    \"sort\": \"-ga:newUsers\"\n}\n</code></pre>\n<pre><code>{\n    \"ids\": \"ga:97038718\",\n    \"start_date\": \"30daysAgo\",\n    \"end_date\": \"yesterday\",\n    \"metrics\": \"ga:newUsers\",\n    \"dimensions\": \"ga:date\",\n    \"sort\": \"-ga:newUsers\"\n}\n</code></pre>\n<p>You can get an idea of possible field types and dimensions using the <a href=\"https://ga-dev-tools.appspot.com/query-explorer/\">Query Explorer tool</a>.</p>","frontmatter":{"permalink":null,"title":"Google Analytics Setup","description":null,"keywords":null,"parent_category":"data-sources","category":"setup","toc":null,"layout":null,"hide_topics":null},"parent":{"__typename":"File","relativePath":"kb/data-sources/google-analytics-setup.md"}},"Parent":{"frontmatter":{"title":"Setup"}},"Section":{"name":"Data Sources"}},"pageContext":{"category":"setup","parent_category":"data-sources","slug":"google-analytics"}}