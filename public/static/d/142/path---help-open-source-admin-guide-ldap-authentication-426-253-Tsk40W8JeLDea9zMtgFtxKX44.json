{"data":{"Article":{"html":"<p>Starting from Redash v3, there is direct support for LDAP/AD authentication. To set it up you will need to install the <code>ldap3</code> Python package (version <code>2.2.4</code>, GPL licensed) and add the relevant configuration values (see below). Once you done both, you need to restart the application service.</p>\n<h2>Configuration</h2>\n<p>Add the following to your environment variables (<code>.env</code> file or Docker configuration):</p>\n<ul>\n<li><code>REDASH_LDAP_LOGIN_ENABLED</code>: When <code>true</code> LDAP login will be enabled at <code>ldap/login</code> endpoint. <strong>[Required]</strong> * If <code>REDASH_PASSWORD_LOGIN_ENABLED</code> is <code>false</code>, users will be prevented from logging in to Redash using Redash's authentication and will instead automatically be redirected to the LDAP login endpoint.</li>\n<li><code>REDASH_LDAP_URL</code>: The URL of the LDAP/AD host. This includes port. Ex: <code>\"127.0.0.1:389\"</code> <strong>[Required]</strong></li>\n<li><code>REDASH_LDAP_BIND_DN</code>: The DN to bind to. This is used to determine the identity of the user being authenticated. <strong>[Required]</strong> * For AD this should be <code>\"org\\\\user_dn\"</code>. The two slashes are required.</li>\n<li><code>REDASH_LDAP_BIND_DN_PASSWORD</code>: The password to bind to the DN specified in <code>REDASH_LDAP_BIND_DN</code> <strong>[Required]</strong></li>\n<li><code>REDASH_LDAP_DISPLAY_NAME_KEY</code>: The key with the full name of the user. * Default is <code>displayName</code></li>\n<li><code>REDASH_LDAP_EMAIL_KEY</code>: The key with the email of the user. * Default is <code>mail</code></li>\n<li><code>REDASH_LDAP_CUSTOM_USERNAME_PROMPT</code>: A custom prompt to be displayed above the username field. * Default is <code>LDAP/AD/SSO username:</code></li>\n<li><code>REDASH_LDAP_SEARCH_TEMPLATE</code>: The search template used by the DN to find the user.\n_ By default this is <code>\"(cn=%(username)s)\"</code>, but for AD it should be <code>\"(sAMAccountName=%(username)s)\"</code>\n_ <code>%(username)s</code> is the username entered in the ldap login page</li>\n<li>\n<p><code>REDASH_LDAP_SEARCH_DN</code>: The search DN to bind to. Ex. <code>\"cn=users,dc=ORG,dc=local\"</code> <strong>[Required]</strong></p>\n<ul>\n<li>Prior to 4.0, this option was called <code>REDASH_SEARCH_DN</code></li>\n</ul>\n</li>\n</ul>\n<h2>Docker</h2>\n<p>If using LDAP in a docker setup, then you will have to create a custom image (<a href=\"https://github.com/getredash/redash/pull/1836#issuecomment-321331014\">https://github.com/getredash/redash/pull/1836#issuecomment-321331014</a>):</p>\n<pre><code>FROM redash/redash:latest\n\nRUN pip install ldap3\n</code></pre>\n<p>If you're using Docker Compose to run Redash, you can replace replace <code>image: redash/redash:latest</code> with <code>build: .</code> assuming the custom Dockerfile is in the same directory.</p>","frontmatter":{"permalink":null,"title":"LDAP/AD Authentication","description":null,"keywords":null,"parent_category":"open-source","category":"admin-guide","toc":null,"layout":null,"hide_topics":null},"parent":{"__typename":"File","relativePath":"kb/open-source/admin-guide/ldap-authentication.md"}},"Parent":{"frontmatter":{"title":"Admin Guide"}},"Section":{"name":"Open Source & Self Hosted"}},"pageContext":{"category":"admin-guide","parent_category":"open-source","slug":"ldap-authentication"}}